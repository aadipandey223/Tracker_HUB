ENTITIES (JSON Schemas)
entities/VisionBoard.json
{
  "name": "VisionBoard",
  "type": "object",
  "properties": {
    "title": {"type": "string", "description": "Board title"},
    "category": {"type": "string", "enum": ["Career Growth", "Financial Goals", "Personal Development", "Relationships", "Health & Wellness", "Travel Dreams", "Creative Projects", "Other"], "description": "Board category"},
    "description": {"type": "string", "description": "Board description"},
    "background_color": {"type": "string", "default": "#f8fafc", "description": "Background color"},
    "background_image": {"type": "string", "description": "Background image URL"},
    "is_archived": {"type": "boolean", "default": false},
    "is_starred": {"type": "boolean", "default": false},
    "tags": {"type": "array", "items": {"type": "string"}},
    "theme": {"type": "string", "enum": ["light", "dark", "gradient"], "default": "light"}
  },
  "required": ["title", "category"]
}
entities/VisionBoardItem.json
{
  "name": "VisionBoardItem",
  "type": "object",
  "properties": {
    "board_id": {"type": "string", "description": "Reference to VisionBoard"},
    "type": {"type": "string", "enum": ["image", "text", "goal", "affirmation", "shape", "sticker"], "description": "Item type"},
    "content": {"type": "string", "description": "Text content or image URL"},
    "x": {"type": "number", "default": 0, "description": "X position"},
    "y": {"type": "number", "default": 0, "description": "Y position"},
    "width": {"type": "number", "default": 200},
    "height": {"type": "number", "default": 200},
    "rotation": {"type": "number", "default": 0},
    "z_index": {"type": "number", "default": 1},
    "style": {"type": "object", "description": "Style properties like font, color, etc."},
    "linked_goal_id": {"type": "string", "description": "Linked task/goal ID"},
    "is_completed": {"type": "boolean", "default": false}
  },
  "required": ["board_id", "type"]
}
MAIN PAGE
pages/VisionBoard.js
import React, { useState, useEffect } from 'react';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { base44 } from '@/api/base44Client';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { 
  Plus, Search, Grid, List, Star, Archive, Sparkles, 
  Loader2, LayoutGrid
} from 'lucide-react';
import BoardCard from '../components/visionboard/BoardCard';
import CreateBoardDialog from '../components/visionboard/CreateBoardDialog';
import BoardEditor from '../components/visionboard/BoardEditor';

export default function VisionBoard() {
  const [showCreateDialog, setShowCreateDialog] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const [filter, setFilter] = useState('all');
  const [editingBoard, setEditingBoard] = useState(null);
  const queryClient = useQueryClient();

  const { data: boards = [], isLoading: boardsLoading } = useQuery({
    queryKey: ['visionBoards'],
    queryFn: () => base44.entities.VisionBoard.list('-created_date'),
  });

  const { data: allItems = [] } = useQuery({
    queryKey: ['visionBoardItems'],
    queryFn: () => base44.entities.VisionBoardItem.list(),
  });

  const { data: tasks = [] } = useQuery({
    queryKey: ['tasks'],
    queryFn: () => base44.entities.Task.list(),
  });

  const currentBoardItems = allItems.filter(item => item.board_id === editingBoard?.id);

  const createBoardMutation = useMutation({
    mutationFn: (data) => base44.entities.VisionBoard.create(data),
    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['visionBoards'] }),
  });

  const updateBoardMutation = useMutation({
    mutationFn: ({ id, data }) => base44.entities.VisionBoard.update(id, data),
    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['visionBoards'] }),
  });

  const deleteBoardMutation = useMutation({
    mutationFn: (id) => base44.entities.VisionBoard.delete(id),
    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['visionBoards'] }),
  });

  const createItemMutation = useMutation({
    mutationFn: (data) => base44.entities.VisionBoardItem.create(data),
    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['visionBoardItems'] }),
  });

  const updateItemMutation = useMutation({
    mutationFn: ({ id, data }) => base44.entities.VisionBoardItem.update(id, data),
    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['visionBoardItems'] }),
  });

  const deleteItemMutation = useMutation({
    mutationFn: (id) => base44.entities.VisionBoardItem.delete(id),
    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['visionBoardItems'] }),
  });

  const handleCreateBoard = async (data) => {
    const { templateItems, ...boardData } = data;
    
    const cleanBoardData = {
      title: boardData.title || 'Untitled Board',
      category: boardData.category || 'Other',
      description: boardData.description || '',
      background_color: boardData.background_color || '#f8fafc',
      tags: boardData.tags || [],
      is_starred: false,
      is_archived: false
    };
    
    const newBoard = await createBoardMutation.mutateAsync(cleanBoardData);
    
    if (templateItems && templateItems.length > 0) {
      for (const item of templateItems) {
        await createItemMutation.mutateAsync({ 
          ...item, 
          board_id: newBoard.id 
        });
      }
    }
    
    setEditingBoard(newBoard);
    setShowCreateDialog(false);
  };

  const handleStarBoard = (board) => {
    updateBoardMutation.mutate({ id: board.id, data: { is_starred: !board.is_starred } });
  };

  const handleArchiveBoard = (board) => {
    updateBoardMutation.mutate({ id: board.id, data: { is_archived: !board.is_archived } });
  };

  const handleDeleteBoard = async (board) => {
    const boardItems = allItems.filter(item => item.board_id === board.id);
    await Promise.all(boardItems.map(item => deleteItemMutation.mutateAsync(item.id)));
    await deleteBoardMutation.mutateAsync(board.id);
  };

  const handleDuplicateBoard = async (board) => {
    const newBoard = await createBoardMutation.mutateAsync({
      ...board,
      title: `${board.title} (Copy)`,
      is_starred: false
    });
    const boardItems = allItems.filter(item => item.board_id === board.id);
    await Promise.all(boardItems.map(item => 
      createItemMutation.mutateAsync({ ...item, board_id: newBoard.id })
    ));
  };

  const handleAddItem = async (itemData) => {
    await createItemMutation.mutateAsync({
      ...itemData,
      board_id: editingBoard.id
    });
  };

  const handleUpdateItem = async (itemId, updates) => {
    await updateItemMutation.mutateAsync({ id: itemId, data: updates });
  };

  const handleDeleteItem = async (itemId) => {
    await deleteItemMutation.mutateAsync(itemId);
  };

  const handleDuplicateItem = async (item) => {
    await createItemMutation.mutateAsync({
      ...item,
      x: (item.x || 0) + 20,
      y: (item.y || 0) + 20
    });
  };

  const handleUpdateBoard = async (updates) => {
    await updateBoardMutation.mutateAsync({ id: editingBoard.id, data: updates });
    setEditingBoard(prev => ({ ...prev, ...updates }));
  };

  const filteredBoards = boards.filter(board => {
    const matchesSearch = board.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
      (board.tags || []).some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));
    
    if (filter === 'starred') return matchesSearch && board.is_starred;
    if (filter === 'archived') return matchesSearch && board.is_archived;
    return matchesSearch && !board.is_archived;
  });

  const getItemCount = (boardId) => allItems.filter(item => item.board_id === boardId).length;

  if (editingBoard) {
    return (
      <BoardEditor
        board={editingBoard}
        items={currentBoardItems}
        onBack={() => setEditingBoard(null)}
        onSave={() => {}}
        onAddItem={handleAddItem}
        onUpdateItem={handleUpdateItem}
        onDeleteItem={handleDeleteItem}
        onDuplicateItem={handleDuplicateItem}
        onUpdateBoard={handleUpdateBoard}
        tasks={tasks}
        isSaving={updateBoardMutation.isPending || createItemMutation.isPending || updateItemMutation.isPending}
      />
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-orange-900/20">
      {/* Hero Section */}
      <section className="relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500">
        <div className="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920')] bg-cover bg-center opacity-20" />
        <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center">
          <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/20 backdrop-blur-sm text-white text-sm font-medium mb-6">
            <Sparkles className="w-4 h-4" />
            Visualize Your Dreams
          </div>
          <h1 className="text-4xl md:text-5xl font-bold text-white mb-4">
            Vision Board
          </h1>
          <p className="text-xl text-white/80 max-w-2xl mx-auto">
            Create beautiful vision boards to manifest your goals and dreams into reality
          </p>
        </div>
      </section>

      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {/* Toolbar */}
        <div className="flex flex-col sm:flex-row gap-4 mb-8">
          <div className="flex-1 relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
            <Input
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              placeholder="Search boards..."
              className="pl-10 bg-white dark:bg-gray-800"
            />
          </div>
          
          <Tabs value={filter} onValueChange={setFilter}>
            <TabsList>
              <TabsTrigger value="all" className="gap-2">
                <LayoutGrid className="w-4 h-4" /> All
              </TabsTrigger>
              <TabsTrigger value="starred" className="gap-2">
                <Star className="w-4 h-4" /> Starred
              </TabsTrigger>
              <TabsTrigger value="archived" className="gap-2">
                <Archive className="w-4 h-4" /> Archived
              </TabsTrigger>
            </TabsList>
          </Tabs>

          <Button 
            onClick={() => setShowCreateDialog(true)}
            className="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700"
          >
            <Plus className="w-5 h-5 mr-2" /> New Board
          </Button>
        </div>

        {/* Boards Grid */}
        {boardsLoading ? (
          <div className="flex items-center justify-center py-20">
            <Loader2 className="w-8 h-8 animate-spin text-purple-500" />
          </div>
        ) : filteredBoards.length === 0 ? (
          <div className="text-center py-20">
            <div className="w-20 h-20 mx-auto mb-6 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center">
              <Sparkles className="w-10 h-10 text-purple-500" />
            </div>
            <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-2">
              {filter === 'all' ? 'Create Your First Vision Board' : `No ${filter} boards`}
            </h3>
            <p className="text-gray-500 dark:text-gray-400 mb-6">
              {filter === 'all' 
                ? 'Start visualizing your dreams and goals today' 
                : 'Your boards will appear here'}
            </p>
            {filter === 'all' && (
              <Button 
                onClick={() => setShowCreateDialog(true)}
                className="bg-gradient-to-r from-purple-600 to-pink-600"
              >
                <Plus className="w-5 h-5 mr-2" /> Create Board
              </Button>
            )}
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            {filteredBoards.map(board => (
              <BoardCard
                key={board.id}
                board={board}
                itemCount={getItemCount(board.id)}
                onOpen={setEditingBoard}
                onStar={handleStarBoard}
                onArchive={handleArchiveBoard}
                onDelete={handleDeleteBoard}
                onDuplicate={handleDuplicateBoard}
              />
            ))}
          </div>
        )}
      </div>

      <CreateBoardDialog
        open={showCreateDialog}
        onClose={() => setShowCreateDialog(false)}
        onCreate={handleCreateBoard}
      />
    </div>
  );
}
COMPONENTS
components/visionboard/CreateBoardDialog.jsx
import React, { useState } from 'react';
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import { 
  Briefcase, DollarSign, User, Heart, Activity, Plane, Palette, Sparkles, Loader2, ArrowLeft
} from 'lucide-react';
import BoardTemplates, { templates } from './BoardTemplates';

const categories = [
  { value: 'Career Growth', icon: Briefcase, color: 'bg-blue-500' },
  { value: 'Financial Goals', icon: DollarSign, color: 'bg-green-500' },
  { value: 'Personal Development', icon: User, color: 'bg-purple-500' },
  { value: 'Relationships', icon: Heart, color: 'bg-pink-500' },
  { value: 'Health & Wellness', icon: Activity, color: 'bg-red-500' },
  { value: 'Travel Dreams', icon: Plane, color: 'bg-cyan-500' },
  { value: 'Creative Projects', icon: Palette, color: 'bg-orange-500' },
  { value: 'Other', icon: Sparkles, color: 'bg-gray-500' },
];

const backgroundColors = [
  '#f8fafc', '#fef3c7', '#fce7f3', '#dbeafe', '#d1fae5', '#e0e7ff', '#fae8ff', '#1f2937'
];

export default function CreateBoardDialog({ open, onClose, onCreate }) {
  const [step, setStep] = useState('template');
  const [selectedTemplate, setSelectedTemplate] = useState(null);
  const [formData, setFormData] = useState({
    title: '',
    category: 'Personal Development',
    description: '',
    background_color: '#f8fafc',
    tags: ''
  });
  const [isCreating, setIsCreating] = useState(false);

  const handleTemplateSelect = async (template) => {
    if (template.id === 'blank') {
      setSelectedTemplate(template);
      setFormData(prev => ({
        ...prev,
        background_color: '#f8fafc',
        category: 'Personal Development'
      }));
      setStep('details');
      return;
    }

    setIsCreating(true);
    const categoryMap = {
      career: 'Career Growth',
      financial: 'Financial Goals',
      health: 'Health & Wellness',
      travel: 'Travel Dreams',
      love: 'Relationships',
      growth: 'Personal Development'
    };

    try {
      await onCreate({
        title: `${template.name} Board`,
        category: categoryMap[template.id] || 'Other',
        description: template.description || '',
        background_color: template.background || '#f8fafc',
        tags: [],
        templateItems: template.items || []
      });
      onClose();
    } catch (error) {
      console.error('Error creating board:', error);
    } finally {
      setIsCreating(false);
    }
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!formData.title.trim()) return;
    
    setIsCreating(true);
    try {
      await onCreate({
        ...formData,
        tags: formData.tags ? formData.tags.split(',').map(t => t.trim()).filter(Boolean) : [],
        templateItems: selectedTemplate?.items || []
      });
      setFormData({ title: '', category: 'Personal Development', description: '', background_color: '#f8fafc', tags: '' });
      setStep('template');
      setSelectedTemplate(null);
      onClose();
    } catch (error) {
      console.error('Error creating board:', error);
    } finally {
      setIsCreating(false);
    }
  };

  const handleClose = () => {
    setStep('template');
    setSelectedTemplate(null);
    onClose();
  };

  return (
    <Dialog open={open} onOpenChange={handleClose}>
      <DialogContent className="max-w-2xl dark:bg-gray-800 dark:border-gray-700">
        <DialogHeader>
          <DialogTitle className="text-xl dark:text-white flex items-center gap-2">
            {step === 'details' && (
              <Button variant="ghost" size="icon" onClick={() => setStep('template')} className="h-8 w-8">
                <ArrowLeft className="w-4 h-4" />
              </Button>
            )}
            {step === 'template' ? 'Choose a Template' : 'Board Details'}
          </DialogTitle>
        </DialogHeader>

        {isCreating ? (
          <div className="flex flex-col items-center justify-center py-12">
            <Loader2 className="w-10 h-10 animate-spin text-purple-500 mb-4" />
            <p className="text-gray-600 dark:text-gray-400">Creating your vision board...</p>
          </div>
        ) : step === 'template' ? (
          <BoardTemplates onSelect={handleTemplateSelect} />
        ) : (
        <form onSubmit={handleSubmit} className="space-y-5">
          <div className="space-y-2">
            <Label>Board Title</Label>
            <Input
              value={formData.title}
              onChange={(e) => setFormData({...formData, title: e.target.value})}
              placeholder="My Dream Life 2025"
              className="dark:bg-gray-700"
            />
          </div>

          <div className="space-y-2">
            <Label>Category</Label>
            <div className="grid grid-cols-4 gap-2">
              {categories.map(cat => {
                const Icon = cat.icon;
                return (
                  <button
                    key={cat.value}
                    type="button"
                    onClick={() => setFormData({...formData, category: cat.value})}
                    className={`p-3 rounded-lg border-2 flex flex-col items-center gap-1 transition-all ${
                      formData.category === cat.value 
                        ? 'border-orange-500 bg-orange-50 dark:bg-orange-900/20' 
                        : 'border-gray-200 dark:border-gray-600 hover:border-gray-300'
                    }`}
                  >
                    <div className={`w-8 h-8 ${cat.color} rounded-lg flex items-center justify-center`}>
                      <Icon className="w-4 h-4 text-white" />
                    </div>
                    <span className="text-xs text-center leading-tight dark:text-gray-300">{cat.value.split(' ')[0]}</span>
                  </button>
                );
              })}
            </div>
          </div>

          <div className="space-y-2">
            <Label>Description (optional)</Label>
            <Textarea
              value={formData.description}
              onChange={(e) => setFormData({...formData, description: e.target.value})}
              placeholder="What do you want to manifest?"
              className="dark:bg-gray-700"
            />
          </div>

          <div className="space-y-2">
            <Label>Background Color</Label>
            <div className="flex gap-2">
              {backgroundColors.map(color => (
                <button
                  key={color}
                  type="button"
                  onClick={() => setFormData({...formData, background_color: color})}
                  className={`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 ${
                    formData.background_color === color ? 'border-orange-500 ring-2 ring-orange-200' : 'border-gray-300'
                  }`}
                  style={{ backgroundColor: color }}
                />
              ))}
            </div>
          </div>

          <div className="space-y-2">
            <Label>Tags (comma separated)</Label>
            <Input
              value={formData.tags}
              onChange={(e) => setFormData({...formData, tags: e.target.value})}
              placeholder="success, motivation, 2025"
              className="dark:bg-gray-700"
            />
          </div>

          <div className="flex gap-3 pt-2">
            <Button type="button" variant="outline" onClick={() => setStep('template')} className="flex-1">
              Back
            </Button>
            <Button 
              type="submit" 
              disabled={isCreating || !formData.title.trim()}
              className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500"
            >
              {isCreating ? <Loader2 className="w-4 h-4 animate-spin mr-2" /> : null}
              Create Board
            </Button>
          </div>
        </form>
        )}
      </DialogContent>
    </Dialog>
  );
}
components/visionboard/BoardTemplates.jsx
import React from 'react';
import { Button } from '@/components/ui/button';
import { 
  Briefcase, DollarSign, Heart, Activity, Plane, User, Sparkles, FileText
} from 'lucide-react';

const templates = [
  {
    id: 'blank',
    name: 'Blank Canvas',
    description: 'Start fresh with custom settings',
    icon: FileText,
    color: 'bg-gray-500',
    background: '#f8fafc',
    items: [],
    isBlank: true
  },
  {
    id: 'career',
    name: 'Career Success',
    description: 'Professional growth & achievements',
    icon: Briefcase,
    color: 'bg-blue-500',
    background: '#dbeafe',
    items: [
      { type: 'image', content: 'https://images.unsplash.com/photo-1507679799987-c73779587ccf?w=400', x: 50, y: 50, width: 280, height: 200 },
      { type: 'image', content: 'https://images.unsplash.com/photo-1521737711867-e3b97375f902?w=400', x: 360, y: 50, width: 250, height: 180 },
      { type: 'affirmation', content: 'I am excellent at what I do', x: 50, y: 280, width: 300, height: 80, style: { fontSize: '18px', color: '#1e40af', backgroundColor: '#eff6ff' } },
      { type: 'text', content: 'MY CAREER GOALS 2025', x: 640, y: 50, width: 280, height: 60, style: { fontSize: '24px', fontWeight: 'bold', color: '#1e40af' } },
      { type: 'sticker', content: 'üíº', x: 640, y: 130, width: 60, height: 60 },
      { type: 'sticker', content: 'üöÄ', x: 720, y: 130, width: 60, height: 60 },
    ]
  },
  {
    id: 'financial',
    name: 'Financial Goals',
    description: 'Wealth & abundance visualization',
    icon: DollarSign,
    color: 'bg-green-500',
    background: '#d1fae5',
    items: [
      { type: 'image', content: 'https://images.unsplash.com/photo-1553729459-efe14ef6055d?w=400', x: 50, y: 50, width: 300, height: 220 },
      { type: 'image', content: 'https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?w=400', x: 380, y: 50, width: 250, height: 180 },
      { type: 'affirmation', content: 'Money flows to me easily and freely', x: 50, y: 300, width: 320, height: 80, style: { fontSize: '18px', color: '#166534', backgroundColor: '#dcfce7' } },
      { type: 'text', content: 'FINANCIAL FREEDOM', x: 660, y: 50, width: 280, height: 60, style: { fontSize: '28px', fontWeight: 'bold', color: '#166534' } },
      { type: 'sticker', content: 'üí∞', x: 660, y: 130, width: 60, height: 60 },
      { type: 'sticker', content: 'üíé', x: 740, y: 130, width: 60, height: 60 },
    ]
  },
  {
    id: 'health',
    name: 'Health & Wellness',
    description: 'Fitness, nutrition & wellbeing',
    icon: Activity,
    color: 'bg-red-500',
    background: '#fce7f3',
    items: [
      { type: 'image', content: 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=400', x: 50, y: 50, width: 280, height: 200 },
      { type: 'image', content: 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400', x: 360, y: 50, width: 250, height: 180 },
      { type: 'affirmation', content: 'My body is healthy and strong', x: 50, y: 280, width: 300, height: 80, style: { fontSize: '18px', color: '#be185d', backgroundColor: '#fdf2f8' } },
      { type: 'text', content: 'HEALTHY LIVING', x: 640, y: 50, width: 280, height: 60, style: { fontSize: '28px', fontWeight: 'bold', color: '#be185d' } },
      { type: 'sticker', content: 'üí™', x: 640, y: 130, width: 60, height: 60 },
      { type: 'sticker', content: 'üßò', x: 720, y: 130, width: 60, height: 60 },
    ]
  },
  {
    id: 'travel',
    name: 'Travel Dreams',
    description: 'Adventures & destinations',
    icon: Plane,
    color: 'bg-cyan-500',
    background: '#cffafe',
    items: [
      { type: 'image', content: 'https://images.unsplash.com/photo-1488085061387-422e29b40080?w=400', x: 50, y: 50, width: 300, height: 220 },
      { type: 'image', content: 'https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=400', x: 380, y: 50, width: 250, height: 180 },
      { type: 'affirmation', content: 'I explore the world with joy and wonder', x: 50, y: 300, width: 320, height: 80, style: { fontSize: '18px', color: '#0891b2', backgroundColor: '#ecfeff' } },
      { type: 'text', content: 'WANDERLUST', x: 660, y: 50, width: 280, height: 60, style: { fontSize: '32px', fontWeight: 'bold', color: '#0891b2' } },
      { type: 'sticker', content: '‚úàÔ∏è', x: 660, y: 130, width: 60, height: 60 },
      { type: 'sticker', content: 'üåç', x: 740, y: 130, width: 60, height: 60 },
    ]
  },
  {
    id: 'love',
    name: 'Relationship Goals',
    description: 'Love, family & connections',
    icon: Heart,
    color: 'bg-pink-500',
    background: '#fce7f3',
    items: [
      { type: 'image', content: 'https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=400', x: 50, y: 50, width: 280, height: 200 },
      { type: 'image', content: 'https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?w=400', x: 360, y: 50, width: 250, height: 180 },
      { type: 'affirmation', content: 'I am surrounded by love and warmth', x: 50, y: 280, width: 300, height: 80, style: { fontSize: '18px', color: '#db2777', backgroundColor: '#fdf2f8' } },
      { type: 'text', content: 'LOVE & CONNECTION', x: 640, y: 50, width: 300, height: 60, style: { fontSize: '26px', fontWeight: 'bold', color: '#db2777' } },
      { type: 'sticker', content: '‚ù§Ô∏è', x: 640, y: 130, width: 60, height: 60 },
      { type: 'sticker', content: 'üíï', x: 720, y: 130, width: 60, height: 60 },
    ]
  },
  {
    id: 'growth',
    name: 'Personal Growth',
    description: 'Learning & self-improvement',
    icon: User,
    color: 'bg-purple-500',
    background: '#f3e8ff',
    items: [
      { type: 'image', content: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400', x: 50, y: 50, width: 280, height: 200 },
      { type: 'image', content: 'https://images.unsplash.com/photo-1519834785169-98be25ec3f84?w=400', x: 360, y: 50, width: 250, height: 180 },
      { type: 'affirmation', content: 'I am constantly evolving into my best self', x: 50, y: 280, width: 330, height: 80, style: { fontSize: '18px', color: '#7c3aed', backgroundColor: '#faf5ff' } },
      { type: 'text', content: 'BECOME LIMITLESS', x: 640, y: 50, width: 300, height: 60, style: { fontSize: '28px', fontWeight: 'bold', color: '#7c3aed' } },
      { type: 'sticker', content: 'üå±', x: 640, y: 130, width: 60, height: 60 },
      { type: 'sticker', content: '‚ú®', x: 720, y: 130, width: 60, height: 60 },
    ]
  }
];

export default function BoardTemplates({ onSelect }) {
  return (
    <div className="space-y-4">
      <p className="text-sm text-gray-500 dark:text-gray-400 text-center">
        Choose a template to get started quickly
      </p>
      
      <div className="grid grid-cols-2 gap-3">
        {templates.map(template => {
          const Icon = template.icon;
          return (
            <button
              key={template.id}
              onClick={() => onSelect(template)}
              className="p-4 rounded-xl border-2 border-gray-200 dark:border-gray-700 hover:border-purple-500 dark:hover:border-purple-500 transition-all text-left hover:shadow-lg group"
              style={{ backgroundColor: template.id !== 'blank' ? template.background : undefined }}
            >
              <div className={`w-10 h-10 ${template.color} rounded-lg flex items-center justify-center mb-3 group-hover:scale-110 transition-transform`}>
                <Icon className="w-5 h-5 text-white" />
              </div>
              <h4 className="font-semibold text-gray-900 dark:text-white text-sm">{template.name}</h4>
              <p className="text-xs text-gray-500 dark:text-gray-400 mt-1">{template.description}</p>
              {template.items.length > 0 ? (
                <p className="text-xs text-purple-500 mt-2">‚ú® {template.items.length} elements ready</p>
              ) : (
                <p className="text-xs text-gray-400 mt-2">Customize everything</p>
              )}
            </button>
          );
        })}
      </div>
    </div>
  );
}

export { templates };
components/visionboard/BoardCard.jsx
import React from 'react';
import { Card, CardContent } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { 
  Star, MoreVertical, Archive, Trash2, Copy, Edit, 
  Briefcase, DollarSign, User, Heart, Activity, Plane, Palette, Sparkles
} from 'lucide-react';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { format } from 'date-fns';

const categoryIcons = {
  'Career Growth': Briefcase,
  'Financial Goals': DollarSign,
  'Personal Development': User,
  'Relationships': Heart,
  'Health & Wellness': Activity,
  'Travel Dreams': Plane,
  'Creative Projects': Palette,
  'Other': Sparkles
};

const categoryColors = {
  'Career Growth': 'bg-blue-500',
  'Financial Goals': 'bg-green-500',
  'Personal Development': 'bg-purple-500',
  'Relationships': 'bg-pink-500',
  'Health & Wellness': 'bg-red-500',
  'Travel Dreams': 'bg-cyan-500',
  'Creative Projects': 'bg-orange-500',
  'Other': 'bg-gray-500'
};

export default function BoardCard({ board, itemCount, onOpen, onStar, onArchive, onDelete, onDuplicate }) {
  const Icon = categoryIcons[board.category] || Sparkles;
  
  return (
    <Card 
      className="group relative overflow-hidden border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50 hover:shadow-xl transition-all duration-300 cursor-pointer"
      onClick={() => onOpen(board)}
    >
      <div 
        className="h-40 relative overflow-hidden"
        style={{ 
          backgroundColor: board.background_color || '#f8fafc',
          backgroundImage: board.background_image ? `url(${board.background_image})` : undefined,
          backgroundSize: 'cover',
          backgroundPosition: 'center'
        }}
      >
        <div className="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent" />
        
        <div className="absolute top-3 left-3">
          <Badge className={`${categoryColors[board.category]} text-white`}>
            <Icon className="w-3 h-3 mr-1" />
            {board.category}
          </Badge>
        </div>

        <Button
          variant="ghost"
          size="icon"
          className="absolute top-2 right-2 h-8 w-8 bg-white/20 hover:bg-white/40"
          onClick={(e) => {
            e.stopPropagation();
            onStar(board);
          }}
        >
          <Star className={`w-4 h-4 ${board.is_starred ? 'fill-yellow-400 text-yellow-400' : 'text-white'}`} />
        </Button>

        <div className="absolute bottom-3 right-3 bg-white/90 dark:bg-gray-800/90 px-2 py-1 rounded text-xs font-medium">
          {itemCount} items
        </div>
      </div>

      <CardContent className="p-4">
        <div className="flex items-start justify-between">
          <div className="flex-1 min-w-0">
            <h3 className="font-semibold text-gray-900 dark:text-white truncate">{board.title}</h3>
            {board.description && (
              <p className="text-sm text-gray-500 dark:text-gray-400 truncate mt-1">{board.description}</p>
            )}
            <p className="text-xs text-gray-400 mt-2">
              {format(new Date(board.created_date), 'MMM d, yyyy')}
            </p>
          </div>

          <DropdownMenu>
            <DropdownMenuTrigger asChild onClick={(e) => e.stopPropagation()}>
              <Button variant="ghost" size="icon" className="h-8 w-8 opacity-0 group-hover:opacity-100">
                <MoreVertical className="w-4 h-4" />
              </Button>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end" onClick={(e) => e.stopPropagation()}>
              <DropdownMenuItem onClick={() => onOpen(board)}>
                <Edit className="w-4 h-4 mr-2" /> Edit
              </DropdownMenuItem>
              <DropdownMenuItem onClick={() => onDuplicate(board)}>
                <Copy className="w-4 h-4 mr-2" /> Duplicate
              </DropdownMenuItem>
              <DropdownMenuItem onClick={() => onArchive(board)}>
                <Archive className="w-4 h-4 mr-2" /> Archive
              </DropdownMenuItem>
              <DropdownMenuItem onClick={() => onDelete(board)} className="text-red-600">
                <Trash2 className="w-4 h-4 mr-2" /> Delete
              </DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        </div>

        {board.tags && board.tags.length > 0 && (
          <div className="flex gap-1 mt-3 flex-wrap">
            {board.tags.slice(0, 3).map((tag, i) => (
              <Badge key={i} variant="outline" className="text-xs">
                {tag}
              </Badge>
            ))}
            {board.tags.length > 3 && (
              <Badge variant="outline" className="text-xs">+{board.tags.length - 3}</Badge>
            )}
          </div>
        )}
      </CardContent>
    </Card>
  );
}
components/visionboard/BoardEditor.jsx
import React, { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { 
  ArrowLeft, Save, Play, Download, Share2, Settings, 
  Loader2, Check, Maximize, X, Undo2, Redo2
} from 'lucide-react';
import BoardCanvas from './BoardCanvas';
import ToolsSidebar from './ToolsSidebar';
import PresentationMode from './PresentationMode';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";

export default function BoardEditor({ 
  board, 
  items, 
  onBack, 
  onSave,
  onAddItem,
  onUpdateItem,
  onDeleteItem,
  onDuplicateItem,
  onUpdateBoard,
  tasks,
  isSaving
}) {
  const [selectedItem, setSelectedItem] = useState(null);
  const [viewMode, setViewMode] = useState('edit');
  const [title, setTitle] = useState(board?.title || '');
  const [isFullscreen, setIsFullscreen] = useState(false);
  const [lastSaved, setLastSaved] = useState(new Date());

  useEffect(() => {
    const handleKeyDown = (e) => {
      if (e.key === 'Delete' && selectedItem) {
        onDeleteItem(selectedItem.id);
        setSelectedItem(null);
      }
      if (e.key === 'Escape') {
        setSelectedItem(null);
      }
      if (selectedItem && ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
        e.preventDefault();
        const nudge = e.shiftKey ? 10 : 1;
        const updates = {};
        if (e.key === 'ArrowUp') updates.y = (selectedItem.y || 0) - nudge;
        if (e.key === 'ArrowDown') updates.y = (selectedItem.y || 0) + nudge;
        if (e.key === 'ArrowLeft') updates.x = (selectedItem.x || 0) - nudge;
        if (e.key === 'ArrowRight') updates.x = (selectedItem.x || 0) + nudge;
        onUpdateItem(selectedItem.id, updates);
        setSelectedItem(prev => ({ ...prev, ...updates }));
      }
    };

    document.addEventListener('keydown', handleKeyDown);
    return () => document.removeEventListener('keydown', handleKeyDown);
  }, [selectedItem]);

  const handleSave = () => {
    if (title !== board?.title) {
      onUpdateBoard({ title });
    }
    onSave();
    setLastSaved(new Date());
  };

  const handleAddItem = (itemData) => {
    const x = 50 + Math.random() * 300;
    const y = 50 + Math.random() * 200;
    onAddItem({ ...itemData, x, y });
  };

  const handleExport = async () => {
    const canvas = document.querySelector('.canvas-bg');
    if (!canvas) return;
    
    try {
      const html2canvas = (await import('html2canvas')).default;
      const canvasImage = await html2canvas(canvas, { scale: 2 });
      const link = document.createElement('a');
      link.download = `${board?.title || 'vision-board'}.png`;
      link.href = canvasImage.toDataURL();
      link.click();
    } catch (error) {
      alert('Export feature coming soon!');
    }
  };

  const toggleFullscreen = () => {
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
      setIsFullscreen(true);
    } else {
      document.exitFullscreen();
      setIsFullscreen(false);
    }
  };

  if (viewMode === 'present') {
    return (
      <PresentationMode
        board={board}
        items={items}
        onExit={() => setViewMode('edit')}
      />
    );
  }

  return (
    <div className="h-screen flex flex-col bg-gray-50 dark:bg-gray-900">
      <header className="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-4">
            <Button variant="ghost" size="icon" onClick={onBack}>
              <ArrowLeft className="w-5 h-5" />
            </Button>
            <div>
              <Input
                value={title}
                onChange={(e) => setTitle(e.target.value)}
                className="text-lg font-semibold border-none bg-transparent focus-visible:ring-0 w-64 dark:text-white"
                placeholder="Untitled Board"
              />
              <p className="text-xs text-gray-400 ml-3">
                Last saved: {lastSaved.toLocaleTimeString()}
              </p>
            </div>
          </div>

          <div className="flex items-center gap-2">
            <Button variant="outline" onClick={() => setViewMode('present')}>
              <Play className="w-4 h-4 mr-2" /> Present
            </Button>
            <Button variant="outline" onClick={toggleFullscreen}>
              <Maximize className="w-4 h-4" />
            </Button>
            
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button variant="outline">
                  <Download className="w-4 h-4 mr-2" /> Export
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent>
                <DropdownMenuItem onClick={handleExport}>
                  Download as PNG
                </DropdownMenuItem>
                <DropdownMenuItem>Download as PDF</DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>

            <Button 
              onClick={handleSave}
              disabled={isSaving}
              className="bg-gradient-to-r from-orange-500 to-orange-600"
            >
              {isSaving ? (
                <Loader2 className="w-4 h-4 mr-2 animate-spin" />
              ) : (
                <Save className="w-4 h-4 mr-2" />
              )}
              Save
            </Button>
          </div>
        </div>
      </header>

      <div className="flex-1 flex overflow-hidden">
        <BoardCanvas
          board={board}
          items={items}
          selectedItem={selectedItem}
          onSelectItem={setSelectedItem}
          onUpdateItem={onUpdateItem}
          onDeleteItem={onDeleteItem}
          onDuplicateItem={onDuplicateItem}
          viewMode={viewMode}
        />
        
        <ToolsSidebar
          onAddItem={handleAddItem}
          selectedItem={selectedItem}
          onUpdateItem={onUpdateItem}
          tasks={tasks}
        />
      </div>
    </div>
  );
}